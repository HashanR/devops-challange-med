# name: Terraform CI/CD

# on:
#   pull_request:
#     branches:
#       - master
#   push:
#     branches:
#       - master

# env:
#   AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
#   AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
#   AWS_DEFAULT_REGION: "eu-north-1"

# jobs:
#   terraform-lint-format-plan:
#     name: "Terraform Lint, Format, and Plan"
#     runs-on: ubuntu-latest
#     if: github.event_name == 'pull_request'
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v3

#       - name: Set up Terraform
#         uses: hashicorp/setup-terraform@v2
#         with:
#           terraform_version: 1.5.0

#       - name: Terraform Format
#         id: fmt
#         run: terraform fmt -check
#         continue-on-error: true

#       - name: Terraform Init
#         id: init
#         run: terraform init

#       - name: Terraform Validate
#         id: validate
#         run: terraform validate

#       - name: Terraform Plan
#         id: plan
#         run: terraform plan -no-color -input=false
#         continue-on-error: true

#       - name: Show Terraform Plan Output
#         run: echo "${{ steps.plan.outputs.stdout }}"

#   terraform-apply:
#     name: "Terraform Apply"
#     runs-on: ubuntu-latest
#     if: github.event_name == 'push' && github.ref == 'refs/heads/master'
#     needs: terraform-lint-format-plan
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v3

#       - name: Set up Terraform
#         uses: hashicorp/setup-terraform@v2
#         with:
#           terraform_version: 1.5.0

#       - name: Terraform Init
#         id: init
#         run: terraform init

#       - name: Terraform Apply
#         id: apply
#         run: terraform apply -auto-approve -input=false
#         env:
#           TF_APPROVE: true



name: Test Branch Name

on:
  pull_request:
    branches:
      - master
  push:
    branches:
      - master

jobs:
  test-branch-name:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Debug Branch Name
        run: |
          echo "GitHub Ref: ${{ github.ref }}"
          echo "GitHub Head Ref: ${{ github.head_ref }}"
          echo "Branch Name: ${GITHUB_REF#refs/heads/}"
        env:
          GITHUB_REF: ${{ github.ref }}